"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{4207:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var r=t(5155),o=t(2115),n=t(2204),i=t(5749);let s={dashboard:["management","executive"],projects:["management","executive"],board:["operations","management","executive"],team:["management","executive"],availability:["operations","management","executive"],timeline:["operations","management","executive"],okrs:["operations","management","executive"],rituais:["operations","management","executive"],viewHourlyRates:["executive"],editHourlyRates:["executive"],viewProjectCosts:["management","executive"],managePermissions:["executive"]},l={Desenvolvedor:"operations",Designer:"operations",Analista:"operations",Estagiário:"operations",Junior:"operations","Tech Lead":"management",Gerente:"management",Head:"management",Coordenador:"management",Senior:"management",Sócio:"executive",CEO:"executive",CTO:"executive",Diretor:"executive"};function d(e,a){return s[a].includes(e)}function c(e){if(l[e])return l[e];let a=e.toLowerCase();return a.includes("s\xf3cio")||a.includes("ceo")||a.includes("cto")||a.includes("diretor")?"executive":a.includes("head")||a.includes("gerente")||a.includes("lead")||a.includes("coordenador")||a.includes("senior")?"management":"operations"}let u={operations:"Time de Opera\xe7\xf5es",management:"Ger\xeancia/Heads",executive:"S\xf3cios/Diretoria"},m=["Desenvolvedor","Desenvolvedor Senior","Tech Lead","Designer","Designer Senior","Analista","Analista Senior","Gerente","Head de Tecnologia","Head de Growth","Coordenador","S\xf3cio","CEO","CTO","Diretor","Estagi\xe1rio"];function x(e){var a,t,s,l,x;let{c:p,count:g,currentUserAccessLevel:v}=e,h=(0,n.C)(e=>e.updateCollaborator),b=(0,n.C)(e=>e.deleteCollaborator),[y,f]=(0,o.useState)(!1),[j,C]=(0,o.useState)(p.name),[N,S]=(0,o.useState)(null!=(t=p.role)?t:""),[w,R]=(0,o.useState)(null!=(s=p.email)?s:""),[E,k]=(0,o.useState)(null!=(l=p.position)?l:""),[D,H]=(0,o.useState)(null!=(x=null==(a=p.hourlyRate)?void 0:a.toString())?x:""),A=d(v,"viewHourlyRates"),L=d(v,"editHourlyRates");return(0,r.jsxs)("li",{className:"border rounded-2xl p-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[y?(0,r.jsxs)("div",{className:"flex-1 grid md:grid-cols-2 lg:grid-cols-4 gap-2",children:[(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Nome *",value:j,onChange:e=>C(e.target.value)}),(0,r.jsxs)("select",{className:"border rounded-xl px-3 py-2",value:E,onChange:e=>k(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Selecione o cargo *"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Email (opcional)",value:w,onChange:e=>R(e.target.value)}),L&&(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Valor/hora (R$)",type:"number",min:"0",step:"0.01",value:D,onChange:e=>H(e.target.value)})]}):(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("div",{className:"font-medium",children:p.name}),(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full border",children:[g," atividade",1===g?"":"s"]}),(0,r.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("executive"===p.accessLevel?"bg-purple-100 text-purple-800":"management"===p.accessLevel?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:u[p.accessLevel]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:p.position||"Cargo n\xe3o definido"}),p.email&&(0,r.jsx)("div",{className:"text-sm text-gray-600",children:p.email}),A&&p.hourlyRate&&(0,r.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:["R$ ",p.hourlyRate.toFixed(2),"/hora"]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"px-3 py-2 rounded-xl bg-black text-white",onClick:()=>{if(!j.trim()||!E.trim())return;let e=c(E),a={name:j,role:N,email:w,position:E,accessLevel:e};if(L&&D.trim()){let e=parseFloat(D);!isNaN(e)&&e>0&&(a.hourlyRate=e)}h(p.id,a),i.oR.success("Colaborador atualizado"),f(!1)},children:"Salvar"}),(0,r.jsx)("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>f(!1),children:"Cancelar"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>f(!0),children:"Editar"}),(0,r.jsx)("button",{className:"px-3 py-2 rounded-xl bg-red-600 text-white",onClick:()=>{let e=g>0?"Remover ".concat(p.name,"? ").concat(g," atividade(s) atribu\xedda(s) a ele(a) ser\xe3o DESASSOCIADAS."):"Remover ".concat(p.name,"?");window.confirm(e)&&(b(p.id),i.oR.success("Colaborador removido"))},title:"Remover colaborador",children:"Remover"})]})})]})}function p(){var e;let a=(0,n.C)(e=>e.collaborators),t=(0,n.C)(e=>e.addCollaborator),s=(e=(0,n.C)(e=>e.okrs),(0,o.useMemo)(()=>{let a=new Map;return e.forEach(e=>e.activities.forEach(e=>{e.assigneeId&&a.set(e.assigneeId,(a.get(e.assigneeId)||0)+1)})),a},[e])),[l,u]=(0,o.useState)(""),[p,g]=(0,o.useState)(""),[v,h]=(0,o.useState)(""),[b,y]=(0,o.useState)(""),f="executive",j=!!l.trim()&&!!p.trim(),C=d(f,"editHourlyRates"),N=()=>{if(!j)return;let e=c(p),a={name:l.trim(),role:p.trim(),email:v.trim()||"",position:p.trim(),accessLevel:e};if(C&&b.trim()){let e=parseFloat(b);!isNaN(e)&&e>0&&(a.hourlyRate=e)}t(a),i.oR.success("Colaborador adicionado"),u(""),g(""),h(""),y("")};return(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("header",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-2",children:[(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Nome do colaborador *",value:l,onChange:e=>u(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()}),(0,r.jsxs)("select",{className:"border rounded-xl px-3 py-2",value:p,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Selecione o cargo *"}),m.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Email (opcional)",value:v,onChange:e=>h(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()}),C&&(0,r.jsx)("input",{className:"border rounded-xl px-3 py-2",placeholder:"Valor/hora (R$)",type:"number",min:"0",step:"0.01",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>"Enter"===e.key&&N()}),(0,r.jsx)("button",{className:"px-4 py-2 rounded-xl bg-black text-white disabled:opacity-50",onClick:N,disabled:!j,children:"Adicionar"})]}),(0,r.jsxs)("ul",{className:"space-y-3",children:[a.map(e=>(0,r.jsx)(x,{c:e,count:s.get(e.id)||0,currentUserAccessLevel:f},e.id)),0===a.length&&(0,r.jsx)("li",{className:"text-sm text-gray-500",children:"Nenhum colaborador ainda — adicione acima."})]})]})}},5749:(e,a,t)=>{t.d(a,{Yf:()=>c,oR:()=>u,uU:()=>d});var r=t(2115);let o=new Set,n=[];function i(){o.forEach(e=>e())}function s(e){return o.add(e),()=>o.delete(e)}function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r={id:Math.random().toString(36).slice(2)+Date.now().toString(36),message:e,type:a,duration:t};n=[...n,r],i(),t>0&&setTimeout(()=>{d(r.id)},t)}function d(e){n=n.filter(a=>a.id!==e),i()}function c(){return(0,r.useSyncExternalStore)(s,()=>n,()=>n)}let u={success:e=>l(e,"success"),error:e=>l(e,"error"),info:e=>l(e,"info")}}}]);