"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{5506:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(5155),n=a(2115),s=a(2204),o=a(5749);function c(e){var t;let{ritual:a}=e,[c,i]=(0,n.useState)(null!=(t=a.content)?t:""),r=(0,s.C)(e=>e.updateRitual),d=(0,s.C)(e=>e.deleteRitual),u=(0,s.C)(e=>e.projects);(0,n.useEffect)(()=>{var e;i(null!=(e=a.content)?e:"")},[a.content]);let m=()=>{r(a.id,{content:c}),o.oR.success("Notas do ritual salvas")};return(0,l.jsxs)("div",{className:"rounded-2xl border p-4 bg-white shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h3",{className:"font-semibold",children:a.title}),(0,l.jsx)("button",{className:"text-red-600 text-sm hover:underline",onClick:()=>{d(a.id),o.oR.success("Ritual exclu\xeddo")},title:"Excluir ritual",children:"Excluir"})]}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,l.jsx)("label",{className:"text-xs text-gray-600",children:"Projeto"}),(0,l.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:a.projectId||"",onChange:e=>{let t=e.target.value||void 0;r(a.id,{projectId:t}),o.oR.success("Ritual vinculado ao projeto")},children:[(0,l.jsx)("option",{value:"",children:"Sem projeto"}),u.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsx)("textarea",{className:"w-full border rounded p-2 text-sm min-h-[100px]",placeholder:"Anota\xe7\xf5es do ritual...",value:c,onChange:e=>i(e.target.value),onBlur:m}),(0,l.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,l.jsx)("button",{className:"bg-black text-white rounded px-3 py-1 text-sm",onClick:m,children:"Salvar notas"}),(0,l.jsx)("button",{className:"border rounded px-3 py-1 text-sm",onClick:()=>{let e=new Blob([["# ".concat(a.title),"","".concat(new Date().toLocaleString()),"",c||""].join("\n")],{type:"text/markdown;charset=utf-8"}),t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download="".concat(a.title.replace(/[^a-z0-9-_]+/gi,"_"),".md"),document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t),o.oR.success("Ata exportada em .md")},children:"Exportar .md"}),(0,l.jsx)("button",{className:"border rounded px-3 py-1 text-sm",onClick:()=>{let e=a.title,t=new Date().toLocaleString(),l=(c||"").replace(/\n/g,"<br/>"),n='<!doctype html>\n      <html>\n        <head>\n          <meta charset="utf-8" />\n          <title>'.concat(e," - Ata</title>\n          <style>\n            body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 24px; color: #111; }\n            h1 { margin: 0 0 8px; font-size: 20px; }\n            .meta { color: #666; font-size: 12px; margin-bottom: 16px; }\n            .content { font-size: 14px; line-height: 1.5; white-space: normal; }\n          </style>\n        </head>\n        <body>\n          <h1>").concat(e,'</h1>\n          <div class="meta">').concat(t,'</div>\n          <div class="content">').concat(l,"</div>\n          <script>window.onload = () => { window.print(); }<\/script>\n        </body>\n      </html>"),s=window.open("","_blank");s&&(s.document.open(),s.document.write(n),s.document.close())},children:"Exportar .pdf"})]})]})}function i(){let e=(0,s.C)(e=>e.rituals),t=(0,s.C)(e=>e.projects),a=(0,s.C)(e=>e.addRitual),[i,r]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),m=()=>{i.trim()&&(a(i),o.oR.success("Ritual adicionado"),r(""))};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between gap-3",children:(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600",children:"Filtrar por projeto:"}),(0,l.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:d,onChange:e=>u(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Todos"}),t.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{className:"border rounded px-2 py-1 flex-1",placeholder:"Novo ritual (ex.: Reuni\xe3o Geral caaqui)",value:i,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),(0,l.jsx)("button",{className:"bg-black text-white rounded px-3 py-1 text-sm disabled:opacity-50",disabled:!i.trim(),onClick:m,children:"Adicionar"})]}),(0,l.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:e.filter(e=>!d||e.projectId===d).map(e=>(0,l.jsx)(c,{ritual:e},e.id))}),0===e.length&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhum ritual criado ainda."})]})}}}]);