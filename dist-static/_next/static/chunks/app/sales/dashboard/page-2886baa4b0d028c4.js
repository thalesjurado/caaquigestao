(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{1102:(e,s,a)=>{Promise.resolve().then(a.bind(a,3133))},3133:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5155),i=a(2115),l=a(2204);function d(){let e=(0,l.C)(e=>e.getTeamAvailability),s=(0,l.C)(e=>e.getProjectMetrics),a=(0,i.useMemo)(()=>e(),[e]),d=(0,i.useMemo)(()=>s(),[s]),r=a.reduce((e,s)=>e+s.availableAllocation,0),c=a.length>0?Math.round(r/a.length):0,n=d.filter(e=>"active"===e.status||"planning"===e.status||"on_hold"===e.status),o=n.filter(e=>e.daysRemaining>=0).sort((e,s)=>e.daysRemaining-s.daysRemaining)[0],m=(0,i.useMemo)(()=>{let e=new Date;if(c>=30||!o)return e.toLocaleDateString();let s=new Date;return s.setDate(s.getDate()+Math.max(0,o.daysRemaining)),s.toLocaleDateString()},[c,o]);return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto p-4 space-y-8",children:[(0,t.jsxs)("header",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold",children:"Vis\xe3o Comercial"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Acompanhe a opera\xe7\xe3o para decidir o melhor momento de iniciar novos deals."})]}),(0,t.jsxs)("section",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Capacidade m\xe9dia dispon\xedvel"}),(0,t.jsxs)("div",{className:"text-2xl font-semibold mt-1",children:[c,"%"]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Pr\xf3ximo t\xe9rmino previsto"}),(0,t.jsx)("div",{className:"text-2xl font-semibold mt-1",children:o?"".concat(o.daysRemaining," dia(s)"):"—"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:o?o.name:"Sem previs\xe3o"})]}),(0,t.jsxs)("div",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Data ideal p/ novo deal"}),(0,t.jsx)("div",{className:"text-2xl font-semibold mt-1",children:m})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Projetos em andamento"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[n.length," projeto(s)"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[n.map(e=>(0,t.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["Status: ",e.status]})]}),(0,t.jsxs)("div",{className:"text-right text-sm",children:[(0,t.jsxs)("div",{children:[e.progressPct.toFixed(0),"% do tempo"]}),(0,t.jsx)("div",{className:e.isOnTime?"text-green-700":"text-red-700",children:e.daysRemaining>=0?"".concat(e.daysRemaining," dia(s) restantes"):"Atrasado"})]})]}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-3 gap-3 text-xs text-gray-600",children:[(0,t.jsxs)("div",{children:["Aloca\xe7\xe3o total: ",e.totalAllocation,"%"]}),(0,t.jsxs)("div",{children:["Custo real: R$ ",e.realCost.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,t.jsxs)("div",{children:["Varia\xe7\xe3o vs or\xe7amento: ",e.budgetVariance.toFixed(1),"%"]})]})]},e.id)),0===n.length&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Sem projetos ativos."})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border bg-white p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Capacidade da Opera\xe7\xe3o"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[a.length," pessoa(s)"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[a.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-3",children:[(0,t.jsxs)("div",{className:"truncate",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:e.role})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["Alocado: ",e.totalAllocation,"%"]}),(0,t.jsxs)("div",{className:"text-xs text-green-700",children:["Dispon\xedvel: ",e.availableAllocation,"%"]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.projects.map(e=>"".concat(e.projectName," (").concat(e.allocation,"%)")).join(" • ")||"Sem aloca\xe7\xf5es ativas"})]},e.collaboratorId)),0===a.length&&(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Sem equipe cadastrada."})]})]})]})}}},e=>{e.O(0,[254,204,441,964,358],()=>e(e.s=1102)),_N_E=e.O()}]);