"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{1966:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(5155),l=t(2115),r=t(2204),o=t(5749),d=t(7545),i=t(5434);function n(){let[e,a]=(0,l.useState)(!1),t=(0,r.C)(e=>e.loadAllData),d=async e=>{var s;let l=null==(s=e.target.files)?void 0:s[0];if(l){a(!0);try{let e=await l.text(),a=JSON.parse(e);(0,i.Qx)(a.data||a)?(o.oR.success("Dados importados com sucesso!"),await t()):o.oR.error("Erro ao importar dados - formato inv\xe1lido")}catch(e){o.oR.error("Erro ao importar dados")}finally{a(!1),e.target.value=""}}};return(0,s.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDD04 Sincroniza\xe7\xe3o de Dados"}),(0,s.jsx)("p",{className:"text-sm text-blue-600 mb-4",children:"Para compartilhar dados entre usu\xe1rios, use as fun\xe7\xf5es de exportar/importar."}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsx)("button",{onClick:()=>{try{(0,i.Rz)(),o.oR.success("Dados exportados com sucesso!")}catch(e){o.oR.error("Erro ao exportar dados")}},className:"px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"\uD83D\uDCE4 Exportar Dados"}),(0,s.jsxs)("label",{className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm cursor-pointer",children:[e?"⏳ Importando...":"\uD83D\uDCE5 Importar Dados",(0,s.jsx)("input",{type:"file",accept:".json",onChange:d,disabled:e,className:"hidden"})]})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-blue-600",children:[(0,s.jsx)("p",{children:"• Exporte seus dados para fazer backup ou compartilhar"}),(0,s.jsx)("p",{children:"• Importe dados de outro usu\xe1rio para sincronizar"}),(0,s.jsx)("p",{children:"• Os dados s\xe3o salvos localmente no navegador"})]})]})}let c=[{key:"backlog",title:"Backlog"},{key:"todo",title:"A Fazer"},{key:"doing",title:"Em Progresso"},{key:"done",title:"Conclu\xeddo"},{key:"historical",title:"Projetos Hist\xf3ricos"}];function u(){let{boardActivities:e,collaborators:a,projects:t,addBoardActivity:i,updateBoardActivity:u,deleteBoardActivity:x}=(0,r.C)(e=>({boardActivities:e.boardActivities,collaborators:e.collaborators,projects:e.projects,addBoardActivity:e.addBoardActivity,updateBoardActivity:e.updateBoardActivity,deleteBoardActivity:e.deleteBoardActivity})),[m,p]=(0,l.useState)(""),[h,b]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[j,f]=(0,l.useState)(""),[N,y]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[S,w]=(0,l.useState)(""),[D,A]=(0,l.useState)([""]),[E,R]=(0,l.useState)(null),[I,T]=(0,l.useState)(""),[z,B]=(0,l.useState)(""),[P,O]=(0,l.useState)(""),[_,F]=(0,l.useState)(""),[L,M]=(0,l.useState)([""]),H=j.trim().length>0,J=()=>{R(null),T(""),B(""),O(""),F(""),M([""])},Q=e=>{e.preventDefault()},q=(0,l.useMemo)(()=>m?e.filter(e=>{var a;return(null==(a=e.client)?void 0:a.toLowerCase().includes(m.toLowerCase()))||!e.client&&"sem-cliente"===m}):e,[e,m]),G=(0,l.useMemo)(()=>{let a=new Set;return e.forEach(e=>{e.client&&a.add(e.client)}),Array.from(a).sort()},[e]),K=(0,l.useMemo)(()=>{let e={backlog:[],todo:[],doing:[],done:[],historical:[]};for(let a of q)e[a.status].push(a);return e},[q]);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Arraste as cartas entre colunas para mudar o status."}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Filtrar por cliente:"}),(0,s.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"border rounded-lg px-3 py-1 text-sm",children:[(0,s.jsx)("option",{value:"",children:"Todos os clientes"}),G.map(e=>(0,s.jsx)("option",{value:e,children:e},e)),(0,s.jsx)("option",{value:"sem-cliente",children:"Sem cliente"})]}),m&&(0,s.jsx)("button",{onClick:()=>p(""),className:"text-xs text-gray-500 hover:text-gray-700",title:"Limpar filtro",children:"✕"})]}),m&&(0,s.jsxs)("div",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:["Filtrado: ","sem-cliente"===m?"Sem cliente":m,"(",q.length," tarefa",1!==q.length?"s":"",")"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl border border-blue-500 text-blue-500 hover:bg-blue-50",onClick:()=>b(!0),children:"+ Novo Projeto"}),(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl bg-black text-white",onClick:()=>v(e=>!e),children:"+ Nova tarefa"})]})]}),g&&(0,s.jsxs)("div",{className:"rounded-2xl border p-3 bg-white",children:[(0,s.jsxs)("div",{className:"grid md:grid-cols-6 gap-3",children:[(0,s.jsx)("input",{className:"md:col-span-2 border rounded-xl p-2",placeholder:"T\xedtulo *",value:j,onChange:e=>f(e.target.value)}),(0,s.jsx)("input",{className:"border rounded-xl p-2",placeholder:"Cliente/Projeto",value:k,onChange:e=>{C(e.target.value);let a=t.find(a=>a.client===e.target.value||a.name===e.target.value);a&&w(a.id)}}),(0,s.jsxs)("select",{className:"border rounded-xl p-2",value:N,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Sem owner"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsxs)("select",{className:"border rounded-xl p-2",value:S,onChange:e=>w(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Sem projeto"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtarefas (opcional)"}),(0,s.jsxs)("div",{className:"space-y-2",children:[D.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{className:"flex-1 border rounded-xl p-2 text-sm",placeholder:"Subtarefa ".concat(a+1),value:e,onChange:e=>((e,a)=>{let t=[...D];t[e]=a,A(t)})(a,e.target.value)}),D.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{D.length>1&&A(D.filter((e,t)=>t!==a))},className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded",children:"\xd7"})]},a)),(0,s.jsx)("button",{type:"button",onClick:()=>{A([...D,""])},className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Adicionar subtarefa"})]})]}),(0,s.jsxs)("div",{className:"mt-3 flex gap-2 justify-end",children:[(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl border",onClick:()=>v(!1),children:"Cancelar"}),(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl bg-black text-white disabled:opacity-50",onClick:()=>{if(!H)return;let e=D.filter(e=>e.trim().length>0);i(j.trim(),{status:"backlog",assigneeId:N||void 0,client:k||void 0,projectId:S||void 0,subtasks:e.length>0?e:void 0}),o.oR.success("Tarefa adicionada com sucesso!"),f(""),y(""),C(""),w(""),A([""]),v(!1)},disabled:!H,children:"Adicionar"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:c.map(e=>{let t=K[e.key];return(0,s.jsxs)("section",{className:"bg-gray-50 rounded-2xl p-3",onDragOver:Q,onDrop:a=>{var t,s;return t=e.key,void(a.preventDefault(),u(a.dataTransfer.getData("text/plain"),{status:t}),o.oR.success("Tarefa movida para ".concat(null==(s=c.find(e=>e.key===t))?void 0:s.title)))},children:[(0,s.jsxs)("header",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:t.length})]}),(0,s.jsxs)("div",{className:"space-y-3 min-h-8",children:[t.map(e=>{let t=a.find(a=>a.id===e.assigneeId);return(0,s.jsxs)("article",{draggable:!0,onDragStart:a=>{var t;return t=e.id,void a.dataTransfer.setData("text/plain",t)},className:"rounded-2xl border p-3 bg-white shadow-sm",children:[(0,s.jsx)("div",{className:"font-medium leading-snug",children:e.title}),e.client&&(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:(0,s.jsx)("span",{children:e.client})}),e.subtasks&&e.subtasks.length>0&&(0,s.jsx)("div",{className:"mt-2 space-y-1",children:e.subtasks.map((e,a)=>(0,s.jsxs)("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[(0,s.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full"}),e]},a))}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-3 text-xs",children:[t&&(0,s.jsx)("span",{children:t.name}),(0,s.jsx)("button",{onClick:()=>{R(e),T(e.title),B(e.assigneeId||""),O(e.client||""),F(e.projectId||""),M(e.subtasks&&e.subtasks.length>0?e.subtasks:[""])},className:"ml-auto px-2 py-1 rounded bg-blue-50 text-blue-600 hover:bg-blue-100",children:"Editar"}),(0,s.jsx)("button",{className:"ml-1 px-2 py-1 rounded-lg border text-gray-600 hover:bg-gray-50",title:"Remover",onClick:()=>{x(e.id),o.oR.success("Tarefa removida")},children:"\uD83D\uDDD1"})]})]},e.id)}),0===t.length&&(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Sem itens."})]})]},e.key)})}),(0,s.jsx)(n,{}),E&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Editar Tarefa"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-6 gap-3 mb-4",children:[(0,s.jsx)("input",{className:"md:col-span-2 border rounded-xl p-2",placeholder:"T\xedtulo *",value:I,onChange:e=>T(e.target.value)}),(0,s.jsx)("input",{className:"border rounded-xl p-2",placeholder:"Cliente",value:P,onChange:e=>O(e.target.value)}),(0,s.jsxs)("select",{className:"border rounded-xl p-2",value:z,onChange:e=>B(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Sem owner"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsxs)("select",{className:"border rounded-xl p-2",value:_,onChange:e=>F(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Sem projeto"}),t.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtarefas"}),(0,s.jsxs)("div",{className:"space-y-2",children:[L.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{className:"flex-1 border rounded-xl p-2 text-sm",placeholder:"Subtarefa ".concat(a+1),value:e,onChange:e=>{let t=[...L];t[a]=e.target.value,M(t)}}),L.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>{L.length>1&&M(L.filter((e,t)=>t!==a))},className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded",children:"\xd7"})]},a)),(0,s.jsx)("button",{type:"button",onClick:()=>M([...L,""]),className:"text-sm text-blue-600 hover:text-blue-800",children:"+ Adicionar subtarefa"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl border",onClick:J,children:"Cancelar"}),(0,s.jsx)("button",{className:"px-3 py-2 rounded-xl bg-black text-white disabled:opacity-50",onClick:()=>{if(!E||!I.trim())return;let e=L.filter(e=>e.trim().length>0);u(E.id,{title:I.trim(),assigneeId:z||void 0,client:P||void 0,projectId:_||void 0,subtasks:e.length>0?e:void 0}),o.oR.success("Tarefa atualizada com sucesso!"),J()},disabled:!I.trim(),children:"Salvar"})]})]})}),(0,s.jsx)(d.A,{isOpen:h,onClose:()=>b(!1),onSuccess:()=>{b(!1),o.oR.success("Projeto criado! Agora voc\xea pode vincul\xe1-lo \xe0s tarefas.")}})]})}}}]);