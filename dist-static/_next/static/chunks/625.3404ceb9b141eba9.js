"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{3625:(e,t,l)=>{l.r(t),l.d(t,{default:()=>u});var s=l(5155),a=l(2115),r=l(2204),o=l(5749),n=l(7545);let c={tech:{color:"bg-blue-100 text-blue-800",label:"Tech"},growth:{color:"bg-green-100 text-green-800",label:"Growth"}},i=[{value:"tech",label:"Tech Implementation",color:c.tech.color},{value:"growth",label:"Growth/Agency",color:c.growth.color}],d=[{value:"planning",label:"Planejamento",color:"bg-gray-100 text-gray-800"},{value:"active",label:"Ativo",color:"bg-blue-100 text-blue-800"},{value:"on_hold",label:"Em Pausa",color:"bg-yellow-100 text-yellow-800"},{value:"completed",label:"Conclu\xeddo",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelado",color:"bg-red-100 text-red-800"}];function x(e){return e.toLocaleDateString("pt-BR")}function u(){let{projects:e,deleteProject:t}=(0,r.C)(),[l,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,g]=(0,a.useState)("all"),p=()=>{m(null),c(!0)},b=()=>{c(!1),m(null)},v=async e=>{if(confirm('Tem certeza que deseja excluir o projeto "'.concat(e.name,'"?')))try{await t(e.id),o.oR.success("Projeto exclu\xeddo com sucesso!")}catch(e){o.oR.error("Erro ao excluir projeto")}},j=e=>{let t=new Date,l=new Date(e.endDate),s=new Date(e.startDate),a=Math.ceil((l.getTime()-t.getTime())/864e5);return t<s?"upcoming":t>l?"completed":a<=7&&a>0?"ending_soon":a<0&&"completed"!==e.status?"overdue":"active"},y=(0,a.useMemo)(()=>"all"===h?e:e.filter(e=>{let t=j(e);switch(h){case"active":return"active"===t||"ending_soon"===t;case"overdue":return"overdue"===t;case"upcoming":return"upcoming"===t;default:return!0}}),[e,h]),N=(0,a.useMemo)(()=>{let e=new Map;return y.forEach(t=>{let l=t.client;e.has(l)||e.set(l,[]),e.get(l).push(t)}),Array.from(e.entries()).map(e=>{let[t,l]=e;return{client:t,projects:l.sort((e,t)=>t.startDate.getTime()-e.startDate.getTime())}})},[y]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Projetos"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Gerencie projetos, aloque equipe e acompanhe cronogramas"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,s.jsxs)("div",{className:"flex gap-1 bg-gray-100 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>g("all"),className:"px-3 py-1 rounded text-sm ".concat("all"===h?"bg-white shadow-sm":"hover:bg-gray-200"),children:"Todos"}),(0,s.jsx)("button",{onClick:()=>g("active"),className:"px-3 py-1 rounded text-sm ".concat("active"===h?"bg-white shadow-sm":"hover:bg-gray-200"),children:"Ativos"}),(0,s.jsx)("button",{onClick:()=>g("overdue"),className:"px-3 py-1 rounded text-sm ".concat("overdue"===h?"bg-white shadow-sm":"hover:bg-gray-200"),children:"Atrasados"}),(0,s.jsx)("button",{onClick:()=>g("upcoming"),className:"px-3 py-1 rounded text-sm ".concat("upcoming"===h?"bg-white shadow-sm":"hover:bg-gray-200"),children:"Futuros"})]}),(0,s.jsx)("button",{onClick:()=>window.location.hash="#timeline",className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 text-sm",children:"\uD83D\uDCC5 Ver Timeline"}),(0,s.jsx)("button",{onClick:()=>window.location.hash="#availability",className:"bg-gray-100 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-200 text-sm",children:"\uD83D\uDC65 Ver Disponibilidade"}),(0,s.jsx)("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600",children:"+ Novo Projeto"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>"tech"===e.type).length}),(0,s.jsx)("div",{className:"text-sm text-blue-600",children:"Tech Implementation"})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"growth"===e.type).length}),(0,s.jsx)("div",{className:"text-sm text-green-600",children:"Growth/Agency"})]}),(0,s.jsxs)("div",{className:"bg-orange-50 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.filter(e=>"active"===e.status).length}),(0,s.jsx)("div",{className:"text-sm text-orange-600",children:"Projetos Ativos"})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:N.length}),(0,s.jsx)("div",{className:"text-sm text-purple-600",children:"Clientes"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[N.map(e=>{let{client:t,projects:l}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl border p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t}),(0,s.jsx)("div",{className:"grid gap-4",children:l.map(e=>{var t;let l=i.find(t=>t.value===e.type),a=d.find(t=>t.value===e.status),r=Math.ceil((e.endDate.getTime()-new Date().getTime())/864e5);return(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{m(e),c(!0)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>v(e),className:"text-red-600 hover:text-red-800 text-sm",children:"Excluir"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(null==l?void 0:l.color),children:null==l?void 0:l.label}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(null==a?void 0:a.color),children:null==a?void 0:a.label}),e.budget&&(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:(t=e.budget,new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t))})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:[x(e.startDate)," - ",x(e.endDate)]}),(0,s.jsx)("span",{className:"overdue"===j(e)?"text-red-600":"ending_soon"===j(e)?"text-orange-600":"upcoming"===j(e)?"text-blue-600":"text-green-600",children:r>0?"".concat(r," dias restantes"):0===r?"Termina hoje":"".concat(Math.abs(r)," dias em atraso")})]})]},e.id)})})]},t)}),0===N.length&&(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)("p",{children:"Nenhum projeto cadastrado ainda."}),(0,s.jsx)("button",{onClick:p,className:"mt-2 text-blue-600 hover:text-blue-800",children:"Criar primeiro projeto"})]})]}),(0,s.jsx)(n.A,{isOpen:l,onClose:b,editingProject:u,onSuccess:()=>{b(),o.oR.success(u?"Projeto atualizado!":"Projeto criado!")}})]})}}}]);