"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[506],{5506:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var n=a(5155),l=a(2115),o=a(2204),s=a(5749);function i(e){var t;let{ritual:a}=e,[i,c]=(0,l.useState)(null!=(t=a.content)?t:""),r=(0,o.C)(e=>e.updateRitual),d=(0,o.C)(e=>e.deleteRitual),u=(0,o.C)(e=>e.projects);(0,l.useEffect)(()=>{var e;c(null!=(e=a.content)?e:"")},[a.content]);let m=()=>{r(a.id,{content:i}),s.oR.success("Notas do ritual salvas")};return(0,n.jsxs)("div",{className:"rounded-2xl border p-4 bg-white shadow-sm",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("h3",{className:"font-semibold",children:a.title}),(0,n.jsx)("button",{className:"text-red-600 text-sm hover:underline",onClick:()=>{d(a.id),s.oR.success("Ritual exclu\xeddo")},title:"Excluir ritual",children:"Excluir"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[(0,n.jsx)("label",{className:"text-xs text-gray-600",children:"Projeto"}),(0,n.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:a.projectId||"",onChange:e=>{let t=e.target.value||void 0;r(a.id,{projectId:t}),s.oR.success("Ritual vinculado ao projeto")},children:[(0,n.jsx)("option",{value:"",children:"Sem projeto"}),u.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsx)("textarea",{className:"w-full border rounded p-2 text-sm min-h-[100px]",placeholder:"Anota\xe7\xf5es do ritual...",value:i,onChange:e=>c(e.target.value),onBlur:m}),(0,n.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,n.jsx)("button",{className:"bg-black text-white rounded px-3 py-1 text-sm",onClick:m,children:"Salvar notas"}),(0,n.jsx)("button",{className:"border rounded px-3 py-1 text-sm",onClick:()=>{let e=new Blob([["# ".concat(a.title),"","".concat(new Date().toLocaleString()),"",i||""].join("\n")],{type:"text/markdown;charset=utf-8"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(a.title.replace(/[^a-z0-9-_]+/gi,"_"),".md"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),s.oR.success("Ata exportada em .md")},children:"Exportar .md"}),(0,n.jsx)("button",{className:"border rounded px-3 py-1 text-sm",onClick:()=>{let e=a.title,t=new Date().toLocaleString(),n=(i||"").replace(/\n/g,"<br/>"),l='<!doctype html>\n      <html>\n        <head>\n          <meta charset="utf-8" />\n          <title>'.concat(e," - Ata</title>\n          <style>\n            body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; padding: 24px; color: #111; }\n            h1 { margin: 0 0 8px; font-size: 20px; }\n            .meta { color: #666; font-size: 12px; margin-bottom: 16px; }\n            .content { font-size: 14px; line-height: 1.5; white-space: normal; }\n          </style>\n        </head>\n        <body>\n          <h1>").concat(e,'</h1>\n          <div class="meta">').concat(t,'</div>\n          <div class="content">').concat(n,"</div>\n          <script>window.onload = () => { window.print(); }<\/script>\n        </body>\n      </html>"),o=window.open("","_blank");o&&(o.document.open(),o.document.write(l),o.document.close())},children:"Exportar .pdf"})]})]})}function c(){let e=(0,o.C)(e=>e.rituals),t=(0,o.C)(e=>e.projects),a=(0,o.C)(e=>e.addRitual),[c,r]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),m=()=>{c.trim()&&(a(c),s.oR.success("Ritual adicionado"),r(""))};return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"flex items-center justify-between gap-3",children:(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)("label",{className:"text-sm text-gray-600",children:"Filtrar por projeto:"}),(0,n.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:d,onChange:e=>u(e.target.value),children:[(0,n.jsx)("option",{value:"",children:"Todos"}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("input",{className:"border rounded px-2 py-1 flex-1",placeholder:"Novo ritual (ex.: Reuni\xe3o Geral caaqui)",value:c,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()}}),(0,n.jsx)("button",{className:"bg-black text-white rounded px-3 py-1 text-sm disabled:opacity-50",disabled:!c.trim(),onClick:m,children:"Adicionar"})]}),(0,n.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:e.filter(e=>!d||e.projectId===d).map(e=>(0,n.jsx)(i,{ritual:e},e.id))}),0===e.length&&(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhum ritual criado ainda."})]})}},5749:(e,t,a)=>{a.d(t,{Yf:()=>d,oR:()=>u,uU:()=>r});var n=a(2115);let l=new Set,o=[];function s(){l.forEach(e=>e())}function i(e){return l.add(e),()=>l.delete(e)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n={id:Math.random().toString(36).slice(2)+Date.now().toString(36),message:e,type:t,duration:a};o=[...o,n],s(),a>0&&setTimeout(()=>{r(n.id)},a)}function r(e){o=o.filter(t=>t.id!==e),s()}function d(){return(0,n.useSyncExternalStore)(i,()=>o,()=>o)}let u={success:e=>c(e,"success"),error:e=>c(e,"error"),info:e=>c(e,"info")}}}]);