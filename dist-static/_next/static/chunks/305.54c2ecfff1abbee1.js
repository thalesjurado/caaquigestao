"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{4305:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(2115),i=r(2204);class o{initializeDefaultProviders(){0===this.providers.length&&(this.providers=[{id:"manual",name:"Manual",enabled:!0,syncInterval:0,autoSync:!1},{id:"toggl",name:"Toggl Track",enabled:!1,syncInterval:15,autoSync:!1},{id:"clockify",name:"Clockify",enabled:!1,syncInterval:15,autoSync:!1},{id:"harvest",name:"Harvest",enabled:!1,syncInterval:30,autoSync:!1}],this.saveProviders())}startTimer(e,t,r){this.activeTimer&&this.stopTimer(),this.activeTimer={projectId:e,collaboratorId:t,description:r,startTime:new Date},this.saveActiveTimer()}stopTimer(){if(!this.activeTimer)return null;let e=new Date,t=Math.floor((e.getTime()-this.activeTimer.startTime.getTime())/6e4),r={id:this.generateId(),projectId:this.activeTimer.projectId,collaboratorId:this.activeTimer.collaboratorId,description:this.activeTimer.description,startTime:this.activeTimer.startTime,endTime:e,duration:t,billable:!0,tags:[],source:"manual",createdAt:new Date,updatedAt:new Date};return this.addEntry(r),this.activeTimer=null,this.saveActiveTimer(),r}getActiveTimer(){return this.activeTimer}addEntry(e){let t={...e,id:this.generateId(),createdAt:new Date,updatedAt:new Date};return this.entries.unshift(t),this.saveEntries(),t}updateEntry(e,t){let r=this.entries.findIndex(t=>t.id===e);r>=0&&(this.entries[r]={...this.entries[r],...t,updatedAt:new Date},this.saveEntries())}deleteEntry(e){this.entries=this.entries.filter(t=>t.id!==e),this.saveEntries()}getEntries(){return this.entries}getEntriesByProject(e){return this.entries.filter(t=>t.projectId===e)}getEntriesByCollaborator(e){return this.entries.filter(t=>t.collaboratorId===e)}getEntriesByDateRange(e,t){return this.entries.filter(r=>r.startTime>=e&&r.startTime<=t)}getStats(e,t,r){let s=this.entries;e&&(s=s.filter(t=>t.startTime>=e.start&&t.startTime<=e.end)),t&&(s=s.filter(e=>e.projectId===t)),r&&(s=s.filter(e=>e.collaboratorId===r));let a=s.reduce((e,t)=>e+t.duration,0),i=s.filter(e=>e.billable).reduce((e,t)=>e+t.duration,0),o=a/60,l=i/60,n=s.reduce((e,t)=>{let r=t.hourlyRate||0;return e+t.duration/60*r},0),d=new Map;s.forEach(e=>{let t=d.get(e.projectId)||{hours:0,cost:0,name:e.projectId},r=e.duration/60,s=r*(e.hourlyRate||0);d.set(e.projectId,{hours:t.hours+r,cost:t.cost+s,name:t.name})});let c=new Map;return s.forEach(e=>{let t=c.get(e.collaboratorId)||{hours:0,cost:0,name:e.collaboratorId},r=e.duration/60,s=r*(e.hourlyRate||0);c.set(e.collaboratorId,{hours:t.hours+r,cost:t.cost+s,name:t.name})}),{totalHours:o,billableHours:l,nonBillableHours:o-l,totalCost:n,averageHourlyRate:o>0?n/o:0,entriesCount:s.length,topProjects:Array.from(d.entries()).map(e=>{let[t,r]=e;return{projectId:t,projectName:r.name,hours:Math.round(100*r.hours)/100,cost:Math.round(100*r.cost)/100}}).sort((e,t)=>t.hours-e.hours).slice(0,5),topCollaborators:Array.from(c.entries()).map(e=>{let[t,r]=e;return{collaboratorId:t,collaboratorName:r.name,hours:Math.round(100*r.hours)/100,cost:Math.round(100*r.cost)/100}}).sort((e,t)=>t.hours-e.hours).slice(0,5)}}getProjectTimeReport(e,t,r,s,a){let i=this.getEntriesByProject(e).filter(e=>e.startTime>=t.start&&e.startTime<=t.end),o=i.reduce((e,t)=>e+t.duration,0),l=i.filter(e=>e.billable).reduce((e,t)=>e+t.duration,0),n=i.reduce((e,t)=>{let r=t.hourlyRate||0;return e+t.duration/60*r},0),d=(null==r?void 0:r.budget)?n/r.budget*100:0,c=new Map;i.forEach(e=>{let t=c.get(e.collaboratorId)||{hours:0,cost:0},r=e.duration/60,s=r*(e.hourlyRate||0);c.set(e.collaboratorId,{hours:t.hours+r,cost:t.cost+s})});let m=Array.from(c.entries()).map(e=>{let[t,r]=e,i=null==s?void 0:s.find(e=>e.id===t),o=null==a?void 0:a.find(e=>e.collaboratorId===t);return{id:t,name:(null==i?void 0:i.name)||t,hours:Math.round(100*r.hours)/100,cost:Math.round(100*r.cost)/100,allocation:(null==o?void 0:o.percentage)||0}}),u=new Map;i.forEach(e=>{let t=e.startTime.toISOString().split("T")[0],r=u.get(t)||{hours:0,cost:0},s=e.duration/60,a=s*(e.hourlyRate||0);u.set(t,{hours:r.hours+s,cost:r.cost+a})});let h=Array.from(u.entries()).map(e=>{let[t,r]=e;return{date:t,hours:Math.round(100*r.hours)/100,cost:Math.round(100*r.cost)/100}}).sort((e,t)=>e.date.localeCompare(t.date)),x=new Map;i.forEach(e=>{let t=e.taskId||"no-task",r=x.get(t)||{hours:0,cost:0,description:e.description},s=e.duration/60,a=s*(e.hourlyRate||0);x.set(t,{hours:r.hours+s,cost:r.cost+a,description:r.description})});let b=Array.from(x.entries()).map(e=>{let[t,r]=e;return{taskId:t,description:r.description,hours:Math.round(100*r.hours)/100,cost:Math.round(100*r.cost)/100}});return{projectId:e,projectName:(null==r?void 0:r.name)||e,totalHours:Math.round(o/60*100)/100,billableHours:Math.round(l/60*100)/100,totalCost:Math.round(100*n)/100,budgetUsed:Math.round(100*d)/100,collaborators:m,dailyBreakdown:h,tasks:b}}async syncWithProvider(e){let t=this.providers.find(t=>t.id===e);if(!t||!t.enabled)throw Error("Provider n\xe3o encontrado ou desabilitado");switch(e){case"toggl":await this.syncWithToggl(t);break;case"clockify":await this.syncWithClockify(t);break;case"harvest":await this.syncWithHarvest(t);break;default:throw Error("Provider n\xe3o suportado")}t.lastSync=new Date,this.saveProviders()}async syncWithToggl(e){console.log("Sincronizando com Toggl..."),[{id:"toggl_1",description:"Desenvolvimento de feature",start:new Date(Date.now()-72e5),duration:120,project:{name:"Projeto A"},user:{name:"Jo\xe3o Silva"}}].forEach(e=>{this.entries.find(t=>t.externalId===e.id)||this.addEntry({projectId:"mock-project-id",collaboratorId:"mock-collaborator-id",description:e.description,startTime:e.start,endTime:new Date(e.start.getTime()+6e4*e.duration),duration:e.duration,billable:!0,tags:["toggl"],source:"toggl",externalId:e.id})})}async syncWithClockify(e){console.log("Sincronizando com Clockify...")}async syncWithHarvest(e){console.log("Sincronizando com Harvest...")}updateProvider(e,t){let r=this.providers.findIndex(t=>t.id===e);r>=0&&(this.providers[r]={...this.providers[r],...t},this.saveProviders())}getProviders(){return this.providers}getProvider(e){return this.providers.find(t=>t.id===e)}generateId(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}formatDuration(e){let t=Math.floor(e/60);return"".concat(t,"h ").concat(e%60,"m")}loadData(){try{let e=localStorage.getItem("caaqui_time_entries");e&&(this.entries=JSON.parse(e).map(e=>({...e,startTime:new Date(e.startTime),endTime:e.endTime?new Date(e.endTime):void 0,createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt)})));let t=localStorage.getItem("caaqui_time_providers");t&&(this.providers=JSON.parse(t).map(e=>({...e,lastSync:e.lastSync?new Date(e.lastSync):void 0})));let r=localStorage.getItem("caaqui_active_timer");if(r){let e=JSON.parse(r);this.activeTimer={...e,startTime:new Date(e.startTime)}}}catch(e){console.warn("Erro ao carregar dados de time tracking:",e)}}saveEntries(){try{localStorage.setItem("caaqui_time_entries",JSON.stringify(this.entries))}catch(e){console.warn("Erro ao salvar entradas de tempo:",e)}}saveProviders(){try{localStorage.setItem("caaqui_time_providers",JSON.stringify(this.providers))}catch(e){console.warn("Erro ao salvar provedores de time tracking:",e)}}saveActiveTimer(){try{this.activeTimer?localStorage.setItem("caaqui_active_timer",JSON.stringify(this.activeTimer)):localStorage.removeItem("caaqui_active_timer")}catch(e){console.warn("Erro ao salvar timer ativo:",e)}}constructor(){this.entries=[],this.providers=[],this.activeTimer=null,this.loadData(),this.initializeDefaultProviders()}}let l=new o;var n=r(5749);function d(){var e,t;let[r,o]=(0,a.useState)("timer"),[d,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[b,g]=(0,a.useState)({start:new Date(Date.now()-6048e5).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[p,v]=(0,a.useState)(null),{projects:j,collaborators:y,projectAllocations:f}=(0,i.C)(),{entries:N,providers:w,activeTimer:T,startTimer:I,stopTimer:D,addEntry:k,updateEntry:S,deleteEntry:E,getStats:C,getProjectTimeReport:P,updateProvider:A,syncWithProvider:M,formatDuration:R}={entries:l.getEntries(),providers:l.getProviders(),activeTimer:l.getActiveTimer(),startTimer:(e,t,r)=>l.startTimer(e,t,r),stopTimer:()=>l.stopTimer(),addEntry:e=>l.addEntry(e),updateEntry:(e,t)=>l.updateEntry(e,t),deleteEntry:e=>l.deleteEntry(e),getEntriesByProject:e=>l.getEntriesByProject(e),getEntriesByCollaborator:e=>l.getEntriesByCollaborator(e),getEntriesByDateRange:(e,t)=>l.getEntriesByDateRange(e,t),getStats:(e,t,r)=>l.getStats(e,t,r),getProjectTimeReport:(e,t,r,s,a)=>l.getProjectTimeReport(e,t,r,s,a),updateProvider:(e,t)=>l.updateProvider(e,t),syncWithProvider:e=>l.syncWithProvider(e),formatDuration:e=>l.formatDuration(e)},[B,_]=(0,a.useState)(0);(0,a.useEffect)(()=>{if(T){let e=setInterval(()=>{_(Math.floor((Date.now()-T.startTime.getTime())/6e4))},1e3);return()=>clearInterval(e)}},[T]);let H=async e=>{try{await M(e),(0,n.P0)("Sincroniza\xe7\xe3o conclu\xedda!","success")}catch(e){(0,n.P0)("Erro na sincroniza\xe7\xe3o","error")}},z=C({start:new Date(b.start),end:new Date(b.end)}),F=N.filter(e=>{let t=e.startTime.toISOString().split("T")[0];return t>=b.start&&t<=b.end});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Time Tracking"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[N.length," entrada(s) registrada(s)"]})]}),(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,s.jsx)("button",{onClick:()=>o("timer"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("timer"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"⏱️ Timer"}),(0,s.jsx)("button",{onClick:()=>o("entries"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("entries"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDCDD Entradas"}),(0,s.jsx)("button",{onClick:()=>o("reports"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("reports"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDCCA Relat\xf3rios"}),(0,s.jsx)("button",{onClick:()=>o("settings"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("settings"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"⚙️ Configura\xe7\xf5es"})]})}),"timer"===r&&(0,s.jsxs)("div",{className:"space-y-6",children:[T&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-900",children:"Timer Ativo"}),(0,s.jsx)("div",{className:"text-2xl font-mono font-bold text-blue-600",children:R(B)})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-blue-800",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Projeto:"})," ",(null==(e=j.find(e=>e.id===T.projectId))?void 0:e.name)||T.projectId]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Colaborador:"})," ",(null==(t=y.find(e=>e.id===T.collaboratorId))?void 0:t.name)||T.collaboratorId]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Descri\xe7\xe3o:"})," ",T.description]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Iniciado em:"})," ",T.startTime.toLocaleString("pt-BR")]})]}),(0,s.jsx)("button",{onClick:()=>{let e=D();e&&((0,n.P0)("Timer parado! ".concat(R(e.duration)," registrado"),"success"),x(""))},className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"⏹️ Parar Timer"})]}),(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:T?"Novo Timer":"Iniciar Timer"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Projeto"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Selecione um projeto"}),j.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ",e.client]},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Colaborador"}),(0,s.jsxs)("select",{value:m,onChange:e=>u(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"",children:"Selecione um colaborador"}),y.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," - ",e.role]},e.id))]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o da Atividade"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"Ex: Desenvolvimento de feature, Reuni\xe3o com cliente...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!d||!m||!h.trim())return void(0,n.P0)("Preencha todos os campos para iniciar o timer","error");I(d,m,h),(0,n.P0)("Timer iniciado!","success")},disabled:!!T,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"▶️ Iniciar Timer"}),(0,s.jsx)("button",{onClick:()=>{if(!d||!m)return void(0,n.P0)("Selecione projeto e colaborador","error");k({projectId:d,collaboratorId:m,description:h||"Entrada manual",startTime:new Date(Date.now()-36e5),endTime:new Date,duration:60,billable:!0,tags:["manual"],source:"manual"}),(0,n.P0)("Entrada adicionada!","success"),x("")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"➕ Adicionar Entrada Manual"})]})]})]}),"entries"===r&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Inicial"}),(0,s.jsx)("input",{type:"date",value:b.start,onChange:e=>g(t=>({...t,start:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data Final"}),(0,s.jsx)("input",{type:"date",value:b.end,onChange:e=>g(t=>({...t,end:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})}),(0,s.jsx)("div",{className:"space-y-3",children:0===F.length?(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"⏱️"}),(0,s.jsx)("p",{children:"Nenhuma entrada encontrada no per\xedodo"})]}):F.map(e=>{var t,r;return(0,s.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.description}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.billable?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.billable?"Fatur\xe1vel":"N\xe3o Fatur\xe1vel"}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("manual"===e.source?"bg-blue-100 text-blue-800":"toggl"===e.source?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"),children:e.source})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Projeto:"}),(0,s.jsx)("div",{children:(null==(t=j.find(t=>t.id===e.projectId))?void 0:t.name)||e.projectId})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Colaborador:"}),(0,s.jsx)("div",{children:(null==(r=y.find(t=>t.id===e.collaboratorId))?void 0:r.name)||e.collaboratorId})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Dura\xe7\xe3o:"}),(0,s.jsx)("div",{className:"font-mono",children:R(e.duration)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Data:"}),(0,s.jsx)("div",{children:e.startTime.toLocaleDateString("pt-BR")})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>{v(e)},className:"px-2 py-1 text-blue-600 hover:bg-blue-50 rounded text-sm",children:"✏️"}),(0,s.jsx)("button",{onClick:()=>{var t;return t=e.id,void(confirm("Tem certeza que deseja excluir esta entrada?")&&(E(t),(0,n.P0)("Entrada exclu\xedda!","success")))},className:"px-2 py-1 text-red-600 hover:bg-red-50 rounded text-sm",children:"\uD83D\uDDD1️"})]})]})},e.id)})})]}),"reports"===r&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(100*z.totalHours)/100,"h"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Total de Horas"})]}),(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(100*z.billableHours)/100,"h"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Horas Fatur\xe1veis"})]}),(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(z.totalCost)}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Custo Total"})]}),(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:z.entriesCount}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Entradas"})]})]}),z.topProjects.length>0&&(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Projetos"}),(0,s.jsx)("div",{className:"space-y-3",children:z.topProjects.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),(0,s.jsx)("span",{className:"font-medium",children:e.projectName})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[e.hours,"h"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.cost)})]})]},e.projectId))})]}),z.topCollaborators.length>0&&(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Top Colaboradores"}),(0,s.jsx)("div",{className:"space-y-3",children:z.topCollaborators.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",t+1]}),(0,s.jsx)("span",{className:"font-medium",children:e.collaboratorName})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[e.hours,"h"]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.cost)})]})]},e.collaboratorId))})]})]}),"settings"===r&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Integra\xe7\xf5es"}),(0,s.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-lg",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"manual"===e.id?"Entradas manuais do sistema":"toggl"===e.id?"Integra\xe7\xe3o com Toggl Track":"clockify"===e.id?"Integra\xe7\xe3o com Clockify":"Integra\xe7\xe3o com Harvest"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.enabled?"Ativo":"Inativo"}),"manual"!==e.id&&(0,s.jsx)("button",{onClick:()=>A(e.id,{enabled:!e.enabled}),className:"px-3 py-1 rounded text-sm font-medium ".concat(e.enabled?"bg-red-100 text-red-800 hover:bg-red-200":"bg-green-100 text-green-800 hover:bg-green-200"),children:e.enabled?"Desabilitar":"Habilitar"})]})]}),e.enabled&&"manual"!==e.id&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),(0,s.jsx)("input",{type:"password",value:e.apiKey||"",onChange:t=>A(e.id,{apiKey:t.target.value}),placeholder:"Insira sua API key",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Workspace ID"}),(0,s.jsx)("input",{type:"text",value:e.workspaceId||"",onChange:t=>A(e.id,{workspaceId:t.target.value}),placeholder:"ID do workspace",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.lastSync?(0,s.jsxs)(s.Fragment,{children:["\xdaltima sincroniza\xe7\xe3o: ",e.lastSync.toLocaleString("pt-BR")]}):"Nunca sincronizado"}),(0,s.jsx)("button",{onClick:()=>H(e.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"\uD83D\uDD04 Sincronizar"})]})]})]},e.id))})]}),p&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Editar Entrada"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o"}),(0,s.jsx)("input",{type:"text",value:p.description,onChange:e=>v({...p,description:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dura\xe7\xe3o (minutos)"}),(0,s.jsx)("input",{type:"number",value:p.duration,onChange:e=>v({...p,duration:parseInt(e.target.value)||0}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"billable",checked:p.billable,onChange:e=>v({...p,billable:e.target.checked}),className:"mr-2"}),(0,s.jsx)("label",{htmlFor:"billable",className:"text-sm font-medium text-gray-700",children:"Fatur\xe1vel"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>v(null),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{p&&(S(p.id,p),v(null),(0,n.P0)("Entrada atualizada!","success"))},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Salvar"})]})]})})]})}}}]);